"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2814],{1953:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"quick-start","title":"Quick Start","description":"This guide walks you through patching container vulnerabilities using Copa. You\'ll learn how to scan an image for vulnerabilities, apply security patches, and verify the results.","source":"@site/docs/quick-start.md","sourceDirName":".","slug":"/quick-start","permalink":"/copacetic/website/next/quick-start","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Quick Start"},"sidebar":"sidebar","previous":{"title":"Installation","permalink":"/copacetic/website/next/installation"},"next":{"title":"Tagging Guidelines","permalink":"/copacetic/website/next/best-practices"}}');var s=i(4848),a=i(8453);const r={title:"Quick Start"},c=void 0,l={},o=[{value:"What You&#39;ll Learn",id:"what-youll-learn",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Tutorial",id:"tutorial",level:2},{value:"Step 1: Set up the Environment",id:"step-1-set-up-the-environment",level:3},{value:"Step 2: Scan for Vulnerabilities",id:"step-2-scan-for-vulnerabilities",level:3},{value:"Step 3: Choose Your Patching Strategy",id:"step-3-choose-your-patching-strategy",level:3},{value:"Option A: Comprehensive Patching",id:"option-a-comprehensive-patching",level:4},{value:"Option B: Targeted Patching",id:"option-b-targeted-patching",level:4},{value:"Step 4: Verify the Patch",id:"step-4-verify-the-patch",level:3},{value:"Step 5: Test the Patched Image",id:"step-5-test-the-patched-image",level:3},{value:"Step 6: Inspect the Changes (Optional)",id:"step-6-inspect-the-changes-optional",level:3},{value:"Summary",id:"summary",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"This guide walks you through patching container vulnerabilities using Copa. You'll learn how to scan an image for vulnerabilities, apply security patches, and verify the results."}),"\n",(0,s.jsx)(n.h2,{id:"what-youll-learn",children:"What You'll Learn"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"How to scan container images for OS-level vulnerabilities"}),"\n",(0,s.jsx)(n.li,{children:"Two patching strategies: comprehensive vs. targeted patching"}),"\n",(0,s.jsx)(n.li,{children:"How to verify successful patching and test patched images"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsx)(n.p,{children:"Before you begin, ensure you have:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Copa CLI"})," - Follow the ",(0,s.jsx)(n.a,{href:"/copacetic/website/next/installation",children:"installation guide"})," to build and install Copa"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Container Runtime"})," - Copa supports both Docker and Podman:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Docker"})," - Docker running with CLI installed (",(0,s.jsx)(n.a,{href:"https://docs.docker.com/desktop/linux/install/#generic-installation-steps",children:"installation guide"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Podman"})," - Podman running with CLI installed (",(0,s.jsx)(n.a,{href:"https://podman.io/docs/installation",children:"installation guide"}),")"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"BuildKit instance"})," - Copa auto-detects available instances in this order:","\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Docker's built-in BuildKit (requires Docker v24.0+ with ",(0,s.jsx)(n.a,{href:"https://docs.docker.com/storage/containerd/#enable-containerd-image-store-on-docker-engine",children:"containerd image store"})," enabled for local images)"]}),"\n",(0,s.jsxs)(n.li,{children:["Current buildx builder (create one with ",(0,s.jsx)(n.code,{children:"docker buildx create --use"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:["BuildKit daemon at ",(0,s.jsx)(n.code,{children:"/run/buildkit/buildkitd.sock"})," (see ",(0,s.jsx)(n.a,{href:"/copacetic/website/next/custom-address",children:"custom addresses"})," for examples)"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Trivy CLI"})," (optional) - For vulnerability scanning (",(0,s.jsx)(n.a,{href:"https://aquasecurity.github.io/trivy/latest/getting-started/installation/",children:"installation guide"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["For advanced BuildKit configurations, see ",(0,s.jsx)(n.a,{href:"/copacetic/website/next/custom-address",children:"custom BuildKit addresses"}),"."]})}),"\n",(0,s.jsx)(n.h2,{id:"tutorial",children:"Tutorial"}),"\n",(0,s.jsx)(n.p,{children:"This tutorial demonstrates patching the nginx:1.21.6 image, which contains numerous vulnerabilities."}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["This tutorial shows Docker commands, but Copa works with both Docker and Podman. Where Docker commands are shown, you can substitute ",(0,s.jsx)(n.code,{children:"podman"})," for ",(0,s.jsx)(n.code,{children:"docker"})," in most cases."]})}),"\n",(0,s.jsx)(n.h3,{id:"step-1-set-up-the-environment",children:"Step 1: Set up the Environment"}),"\n",(0,s.jsx)(n.p,{children:"First, set the image we'll be working with:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"export IMAGE=docker.io/library/nginx:1.21.6\n"})}),"\n",(0,s.jsxs)(n.admonition,{type:"tip",children:[(0,s.jsx)(n.p,{children:"If you want to patch an image using the digest, you can specify the digest like this:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"export IMAGE=docker.io/library/nginx@sha256:25dedae0aceb6b4fe5837a0acbacc6580453717f126a095aa05a3c6fcea14dd4\n"})})]}),"\n",(0,s.jsxs)(n.p,{children:["Copa automatically detects and connects to an available BuildKit instance. If you need a specific instance, see ",(0,s.jsx)(n.a,{href:"/copacetic/website/next/custom-address",children:"custom BuildKit addresses"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"step-2-scan-for-vulnerabilities",children:"Step 2: Scan for Vulnerabilities"}),"\n",(0,s.jsx)(n.p,{children:"Scan the image to identify OS-level vulnerabilities:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"trivy image --vuln-type os --ignore-unfixed $IMAGE\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Expected output:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"nginx:1.21.6 (debian 11.3)\n==========================\nTotal: 207 (UNKNOWN: 0, LOW: 12, MEDIUM: 104, HIGH: 76, CRITICAL: 15)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"step-3-choose-your-patching-strategy",children:"Step 3: Choose Your Patching Strategy"}),"\n",(0,s.jsx)(n.p,{children:"Copa offers two patching approaches:"}),"\n",(0,s.jsx)(n.h4,{id:"option-a-comprehensive-patching",children:"Option A: Comprehensive Patching"}),"\n",(0,s.jsx)(n.p,{children:"Update all outdated packages to their latest versions:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"copa patch -i $IMAGE\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsx)(n.p,{children:"This approach provides the most comprehensive security updates but may introduce compatibility issues. Always test patched images thoroughly before production use."})}),"\n",(0,s.jsx)(n.h4,{id:"option-b-targeted-patching",children:"Option B: Targeted Patching"}),"\n",(0,s.jsx)(n.p,{children:"Update only packages with known vulnerabilities:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Generate a vulnerability report:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"trivy image --vuln-type os --ignore-unfixed -f json -o nginx-report.json $IMAGE\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Patch using the vulnerability report:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"copa patch -r nginx-report.json -i $IMAGE\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Both methods create a new image tagged ",(0,s.jsx)(n.code,{children:"nginx:1.21.6-patched"})," in your local registry."]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["The image used in this tutorial is a multi-platform image containing many different platforms. To learn more about multi-platform patching, see ",(0,s.jsx)(n.a,{href:"/copacetic/website/next/multiplatform-patching",children:"multi-platform patching"})," docs."]})}),"\n",(0,s.jsx)(n.h3,{id:"step-4-verify-the-patch",children:"Step 4: Verify the Patch"}),"\n",(0,s.jsx)(n.p,{children:"Scan the patched image to confirm vulnerabilities were resolved:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"trivy image --vuln-type os --ignore-unfixed $IMAGE-patched\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Expected output:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"nginx:1.21.6-patched (debian 11.10)\n===================================\nTotal: 0 (UNKNOWN: 0, LOW: 0, MEDIUM: 0, HIGH: 0, CRITICAL: 0)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"step-5-test-the-patched-image",children:"Step 5: Test the Patched Image"}),"\n",(0,s.jsx)(n.p,{children:"Verify the patched image works correctly:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker run -d --name test-nginx -p 8080:80 $IMAGE-patched\n"})}),"\n",(0,s.jsx)(n.p,{children:"Test that nginx is responding:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"curl -I http://localhost:8080\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Expected output:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"HTTP/1.1 200 OK\nServer: nginx/1.21.6\n"})}),"\n",(0,s.jsx)(n.p,{children:"Clean up:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker stop test-nginx && docker rm test-nginx\n"})}),"\n",(0,s.jsx)(n.h3,{id:"step-6-inspect-the-changes-optional",children:"Step 6: Inspect the Changes (Optional)"}),"\n",(0,s.jsx)(n.p,{children:"View the patch layer added by Copa:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Using Docker\ndocker history $IMAGE-patched --format "table {{.ID}}\\t{{.CreatedSince}}\\t{{.Size}}\\t{{.Comment}}"\n'})}),"\n",(0,s.jsx)(n.p,{children:"The first entry shows the patch layer with security updates."}),"\n",(0,s.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsx)(n.p,{children:"You've successfully:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"\u2705 Scanned a container image for vulnerabilities"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Applied security patches using Copa"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Verified the patched image is secure and functional"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Learned about different patching strategies"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["The patched image ",(0,s.jsx)(n.code,{children:"nginx:1.21.6-patched"})," is now ready for use with all known OS vulnerabilities resolved."]}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Learn about ",(0,s.jsx)(n.a,{href:"/copacetic/website/next/scanner-plugins",children:"scanner plugins"})," for custom vulnerability sources"]}),"\n",(0,s.jsxs)(n.li,{children:["Explore ",(0,s.jsx)(n.a,{href:"/copacetic/website/next/custom-address",children:"custom BuildKit configurations"})]}),"\n",(0,s.jsxs)(n.li,{children:["Read ",(0,s.jsx)(n.a,{href:"/copacetic/website/next/best-practices",children:"best practices"})," for production use"]}),"\n",(0,s.jsxs)(n.li,{children:["Check out the ",(0,s.jsx)(n.a,{href:"./copa-action.md",children:"Copa Action"})," for GitHub Action integration"]}),"\n",(0,s.jsxs)(n.li,{children:["Check out the ",(0,s.jsx)(n.a,{href:"/copacetic/website/next/docker-extension",children:"Docker Extension"})," for GUI-based patching"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>c});var t=i(6540);const s={},a=t.createContext(s);function r(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);